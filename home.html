<!doctype html>
<html lang="en">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Watchily — Buy & Sell Luxury Watches</title>
	<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&display=swap" rel="stylesheet">
	<style>
		:root{
			--bg:#071029;
			--card: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
			--accent1:#00d4ff; /* cyan */
			--accent2:#7c5cff; /* purple */
			--accent3:#ff7aa2; /* pink */
			--glass: rgba(255,255,255,0.03);
			--muted: rgba(255,255,255,0.72);
			--radius:14px;
		}
		*{box-sizing:border-box}
		html,body{height:100%;margin:0}
		body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, Arial; background: radial-gradient(800px 400px at 10% 20%, rgba(124,92,255,0.06), transparent 8%), radial-gradient(600px 300px at 90% 80%, rgba(0,212,255,0.04), transparent 10%), var(--bg); color:#eaf6ff; padding:26px}

		.app{max-width:1200px;margin:0 auto}
		header{display:flex;justify-content:space-between;align-items:center;margin-bottom:22px}
		.brand{display:flex;align-items:center;gap:12px}
		.logo{width:52px;height:52px;border-radius:12px;background:linear-gradient(135deg,var(--accent1),var(--accent2));display:flex;align-items:center;justify-content:center;font-weight:800;color:#041028;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
		h1{font-size:18px;margin:0}

		nav{display:flex;gap:12px;align-items:center}
		.nav-link{padding:8px 12px;border-radius:10px;color:var(--muted);text-decoration:none;font-weight:600;cursor:pointer}
		.nav-link.active{background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#041028}

		main{margin-top:6px}
		.hero{display:flex;gap:18px;align-items:center;padding:20px;border-radius:16px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));box-shadow:0 12px 40px rgba(2,6,23,0.6)}
		.hero .left{flex:1}
		.hero h2{margin:0 0 8px 0;font-size:26px}
		.hero p{margin:0;color:var(--muted)}
		.hero .cta{margin-top:12px}
		.btn{padding:10px 14px;border-radius:12px;border:none;background:linear-gradient(90deg,var(--accent1),var(--accent2));color:#041028;font-weight:700;cursor:pointer}

		.grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px;margin-top:18px}
		.product{background:var(--card);padding:12px;border-radius:12px;transition:transform .16s ease;border:1px solid rgba(255,255,255,0.02)}
		.product:hover{transform:translateY(-6px)}
		.thumb{height:160px;border-radius:10px;background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));display:flex;align-items:end;padding:12px;color:#fff;font-weight:800}
		.title{margin-top:10px;font-weight:700}
		.meta{color:var(--muted);font-size:13px;margin-top:6px}
		.actions{display:flex;justify-content:space-between;align-items:center;margin-top:10px}
		.ghost{background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:8px;border-radius:10px;cursor:pointer}

		/* Forms */
		.card-form{background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));padding:14px;border-radius:12px}
		label{display:block;font-size:13px;margin-top:8px;color:var(--muted)}
		input,select,textarea{width:100%;padding:10px;margin-top:6px;border-radius:8px;border:none;background:var(--glass);color:inherit}

		/* Admin layout */
		.split{display:grid;grid-template-columns:1fr 360px;gap:14px;margin-top:18px}
		.panel{background:var(--card);padding:12px;border-radius:12px}

		footer{margin-top:26px;color:var(--muted);text-align:center}

		@media(max-width:900px){
			.split{grid-template-columns:1fr}
			.grid{grid-template-columns:repeat(auto-fill,minmax(180px,1fr))}
			header{flex-direction:column;align-items:flex-start;gap:12px}
		}
	</style>
</head>
<body>
	<div class="app">
		<header>
			<div class="brand">
				<div class="logo">W</div>
				<div>
					<h1>Watchily</h1>
					<div style="font-size:12px;color:var(--muted)">Buy, sell & collect luxury watches</div>
				</div>
			</div>
			<nav id="nav">
				<a class="nav-link active" data-route="home">Home</a>
				<a class="nav-link" data-route="buyer">Buyer</a>
				<a class="nav-link" data-route="seller">Seller</a>
				<a class="nav-link" data-route="admin">Admin</a>
			</nav>
		</header>

		<main>
			<!-- Home -->
			<section id="page-home">
				<div class="hero">
					<div class="left">
						<h2>Trusted marketplace for premium watches</h2>
						<p>Explore curated collections, buy from verified sellers, and sell your timepieces with confidence.</p>
						<div class="cta"><button class="btn" onclick="navigate('buyer')">Start Shopping</button></div>
					</div>
					<div class="card-form" style="width:360px">
						<h3 style="margin:0 0 8px 0">Quick search</h3>
						<input id="quickSearch" placeholder="Search by model, brand, or year" />
						<div style="display:flex;gap:8px;margin-top:8px">
							<select id="filterGenre"><option value="">All</option><option>Luxury</option><option>Vintage</option><option>Sport</option></select>
							<button class="btn" onclick="doQuickSearch()">Go</button>
						</div>
					</div>
				</div>

				<h3 style="margin-top:18px">Featured Watches</h3>
				<div id="featuredGrid" class="grid"></div>
			</section>

			<!-- Buyer page -->
			<section id="page-buyer" style="display:none">
				<div style="display:flex;justify-content:space-between;align-items:center;gap:12px">
					<h2>Buyer Marketplace</h2>
					<div>
						<button class="ghost" onclick="openCart()">Cart (<span id="cartCount">0</span>)</button>
					</div>
				</div>
				<div style="margin-top:12px">
					<input id="buyerSearch" placeholder="Search watches..." style="width:100%;padding:12px;border-radius:12px;border:none;background:var(--glass)" />
				</div>
				<div id="buyerGrid" class="grid"></div>
			</section>

			<!-- Seller page -->
			<section id="page-seller" style="display:none">
				<h2>Seller Dashboard</h2>
				<div class="split">
					<div>
						<div class="panel">
							<h3 style="margin-top:0">List a new watch</h3>
							<label>Title <input id="s_title" /></label>
							<label>Brand <input id="s_brand" /></label>
														<label>Price <input id="s_price" type="number" /></label>
														<label>Currency
															<select id="s_currency">
																<option value="USD">USD</option>
																<option value="INR">INR</option>
																<option value="EURO">EURO</option>
																<option value="DINAR">DINAR</option>
																<option value="POUND">POUND</option>
															</select>
														</label>
							<label>Stock <input id="s_stock" type="number" value="1" /></label>
							  <label>Image <input id="s_image" type="file" accept="image/*" /></label>
							<label>Description <textarea id="s_desc" rows="3"></textarea></label>
							<div style="margin-top:10px"><button class="btn" onclick="addProductAsSeller()">Publish Listing</button></div>
						</div>

						<h3 style="margin-top:14px">Your Listings</h3>
						<div id="sellerListings" class="grid"></div>
					</div>

					<div>
						<div class="panel">
							<h3 style="margin-top:0">Seller Tips</h3>
							<ul style="color:var(--muted)">
								<li>Use clear photos and accurate descriptions.</li>
								<li>Set fair prices and disclose watch condition.</li>
								<li>Fulfill orders promptly to keep high ratings.</li>
							</ul>
						</div>
					</div>
				</div>
			</section>

			<!-- Admin page -->
			<section id="page-admin" style="display:none">
				<h2>Admin Panel</h2>
				<div class="split">
					<div>
						<div class="panel">
							<h3 style="margin-top:0">Manage Listings</h3>
							<div id="adminListings"></div>
						</div>
						<div class="panel" style="margin-top:12px">
							<h3>Orders</h3>
							<div id="adminOrders"></div>
						</div>
					</div>

					<div>
						<div class="panel">
							<h3 style="margin-top:0">System</h3>
							<button class="ghost" onclick="seedDemo()">Seed Demo Data</button>
							<div style="height:12px"></div>
							<button class="ghost" onclick="clearAll()">Clear Data</button>
						</div>
					</div>
				</div>
			</section>
		</main> <br><br>

		<footer>
			POWERED BY NDSI COMPANY @2025
		</footer>
        <footer>
             Contact us: harinandhsnair@gmail.com
        </footer>
	</div>

	<!-- Cart Modal -->
	<div id="cartModal" style="display:none;position:fixed;inset:0;background:rgba(2,6,23,0.6);align-items:center;justify-content:center;padding:20px">
		<div style="background:linear-gradient(180deg,#041028,#07112a);padding:16px;border-radius:12px;width:min(760px,96%);max-height:80vh;overflow:auto">
			<div style="display:flex;justify-content:space-between;align-items:center"><h3 style="margin:0">Your Cart</h3><button class="ghost" onclick="closeCart()">Close</button></div>
			<div id="cartContent" style="margin-top:12px;color:var(--muted)"></div>
			<div style="margin-top:12px;text-align:right"><button class="btn" onclick="checkout()">Checkout</button></div>
		</div>
	</div>

	<script>
		// Routing
		function navigate(route){
			document.querySelectorAll('[id^="page-"]').forEach(el=>el.style.display='none');
			document.getElementById('page-'+route).style.display='block';
			document.querySelectorAll('.nav-link').forEach(n=>n.classList.remove('active'));
			document.querySelectorAll('.nav-link').forEach(n=>{ if(n.dataset.route===route) n.classList.add('active'); });
			if(route==='buyer') renderBuyerGrid();
			if(route==='seller') renderSellerListings();
			if(route==='admin') renderAdmin();
			if(route==='home') renderFeatured();
		}

		document.getElementById('nav').addEventListener('click', e=>{ if(e.target.classList.contains('nav-link')) navigate(e.target.dataset.route); });

		// Local storage keys
		const KEY_PRODUCTS = 'watchily_products_v1';
		const KEY_ORDERS = 'watchily_orders_v1';

		// Helpers
		function uid(prefix='p'){return prefix+Math.random().toString(36).slice(2,9)}
		function load(key){try{return JSON.parse(localStorage.getItem(key)||'[]')}catch(e){return[]}}
		function save(key,val){localStorage.setItem(key, JSON.stringify(val))}

		// Currency formatting
		function currencySymbol(cur){
			const map = { USD: '$', INR: '₹', EURO: '€', DINAR: 'د.ج', POUND: '£' };
			return map[cur] || (cur + ' ');
		}
		function formatMoney(amount, cur){
			const num = Number(amount) || 0;
			return currencySymbol(cur) + num.toFixed(2);
		}

		// Seed demo data
		function seedDemo(){
			const demo = [
					{id:'p1',title:'Rolex Submariner',brand:'Rolex',price:12500,currency:'USD',stock:2,desc:'Classic diver with ceramic bezel',img:'',cat:'Luxury'},
					{id:'p2',title:'Omega Speedmaster',brand:'Omega',price:6800,currency:'USD',stock:3,desc:'Moonwatch legend',img:'',cat:'Sport'},
					{id:'p3',title:'Patek Philippe Nautilus',brand:'Patek',price:85000,currency:'USD',stock:1,desc:'Iconic luxury sports watch',img:'',cat:'Luxury'},
					{id:'p4',title:'Seiko Presage',brand:'Seiko',price:450,currency:'USD',stock:6,desc:'Elegant mechanical at value price',img:'',cat:'Vintage'}
			];
			save(KEY_PRODUCTS,demo);
			save(KEY_ORDERS,[]);
			renderAll();
			alert('Demo data seeded');
		}

		function clearAll(){ if(!confirm('Clear demo data?')) return; localStorage.removeItem(KEY_PRODUCTS); localStorage.removeItem(KEY_ORDERS); renderAll(); }

		// Initialize sample data if none
		if(load(KEY_PRODUCTS).length===0) seedDemo();

		// Render functions
		function renderFeatured(){ const grid = document.getElementById('featuredGrid'); grid.innerHTML=''; const products=load(KEY_PRODUCTS); products.slice(0,6).forEach(p=>grid.appendChild(productCard(p,'home'))); }

		function productCard(p,context='buyer'){
			const el = document.createElement('div'); el.className='product';
			// build thumb HTML safely (avoid nested template ${} inside strings)
			const thumbHtml = p.img
				? ('<img src="'+p.img+'" style="width:100%;height:100%;object-fit:cover;border-radius:8px">')
				: ('<div style="width:100%;height:100%;display:flex;align-items:center;justify-content:center;color:#041028;background:linear-gradient(90deg,#00d4ff,#7c5cff);border-radius:8px;font-weight:800">' + (p.brand || '') + '</div>');

			let actionsHtml = '';
			if(context !== 'seller') actionsHtml = '<button class="btn" onclick="addToCart(\''+p.id+'\')">Buy</button>';
			else actionsHtml = '<button class="btn" onclick="editProduct(\''+p.id+'\')">Edit</button>';

				el.innerHTML =
					'<div class="thumb">' + thumbHtml + '</div>' +
					'<div class="title">' + p.title + '</div>' +
					'<div class="meta">' + (p.brand || '') + ' · ' + (p.currency ? formatMoney(p.price,p.currency) : ('$' + p.price)) + ' · ' + p.stock + ' in stock</div>' +
					'<div class="actions">' +
						'<button class="ghost" onclick="viewDetails(\''+p.id+'\')">Details</button>' +
						actionsHtml +
					'</div>';

			return el;
		}

		function renderBuyerGrid(){ const grid = document.getElementById('buyerGrid'); grid.innerHTML=''; const products=load(KEY_PRODUCTS); products.forEach(p=>grid.appendChild(productCard(p,'buyer'))); updateCartCount(); }

		function renderSellerListings(){ const grid = document.getElementById('sellerListings'); grid.innerHTML=''; const products=load(KEY_PRODUCTS); products.forEach(p=>{
			const el = productCard(p,'seller'); grid.appendChild(el);
		}); }

		function renderAdmin(){ const outL=document.getElementById('adminListings'); const outO=document.getElementById('adminOrders'); outL.innerHTML=''; outO.innerHTML=''; const products=load(KEY_PRODUCTS); const orders=load(KEY_ORDERS);
			products.forEach(p=>{ const row = document.createElement('div'); row.style.display='flex'; row.style.justifyContent='space-between'; row.style.padding='8px 0'; row.innerHTML = `<div><strong>${p.title}</strong><div style="color:var(--muted)">${p.brand} · ${p.currency? formatMoney(p.price,p.currency) : ('$'+p.price)} · stock ${p.stock}</div></div><div><button class='ghost' onclick="adminDelete('${p.id}')">Delete</button></div>`; outL.appendChild(row); });
			if(orders.length===0) outO.innerHTML='<div style="color:var(--muted)">No orders yet</div>';
			orders.forEach(o=>{ const row = document.createElement('div'); row.style.borderBottom='1px solid rgba(255,255,255,0.02)'; row.style.padding='8px 0'; const totalStr = o.currency ? formatMoney(o.total,o.currency) : ('$'+o.total); row.innerHTML = `<div><strong>Order ${o.id}</strong><div style="color:var(--muted)">${o.items.length} items · ${totalStr} · ${o.date}</div></div>`; outO.appendChild(row); });
		}

		function renderAll(){ renderFeatured(); renderBuyerGrid(); renderSellerListings(); renderAdmin(); }
		renderAll();

		// Search & Quick
		function doQuickSearch(){ const q=document.getElementById('quickSearch').value.toLowerCase(); const all=load(KEY_PRODUCTS).filter(p=>p.title.toLowerCase().includes(q)||p.brand.toLowerCase().includes(q)); const g=document.getElementById('featuredGrid'); g.innerHTML=''; all.forEach(p=>g.appendChild(productCard(p,'home'))); }
		document.getElementById('buyerSearch').addEventListener('input', e=>{ const q=e.target.value.toLowerCase(); const grid=document.getElementById('buyerGrid'); grid.innerHTML=''; load(KEY_PRODUCTS).filter(p=>p.title.toLowerCase().includes(q)||p.brand.toLowerCase().includes(q)).forEach(p=>grid.appendChild(productCard(p,'buyer'))); });
		function doQuickSearch(){ navigate('buyer'); const q=document.getElementById('quickSearch').value.toLowerCase(); document.getElementById('buyerSearch').value=q; document.getElementById('buyerSearch').dispatchEvent(new Event('input')); }

		// Details placeholder
		function viewDetails(id){ const p = load(KEY_PRODUCTS).find(x=>x.id===id); if(!p) return alert('Not found'); const priceStr = p.currency ? formatMoney(p.price,p.currency) : ('$'+p.price); alert(p.title+'\n\n'+p.desc+'\n\nPrice: '+priceStr+'\nStock: '+p.stock); }

		// Cart
		function getCart(){ return JSON.parse(localStorage.getItem('watchily_cart')||'{}'); }
		function saveCart(cart){ localStorage.setItem('watchily_cart', JSON.stringify(cart)); updateCartCount(); }
		function addToCart(id){ const p = load(KEY_PRODUCTS).find(x=>x.id===id); if(!p||p.stock<=0) return alert('Out of stock'); const cart = getCart(); cart[id] = (cart[id]||0)+1; saveCart(cart); alert('Added to cart'); }
		function updateCartCount(){ const cart = getCart(); const count = Object.values(cart).reduce((a,b)=>a+b,0); document.getElementById('cartCount').textContent = count; }
		function openCart(){ const modal=document.getElementById('cartModal'); modal.style.display='flex'; renderCart(); }
		function closeCart(){ document.getElementById('cartModal').style.display='none'; }
		function renderCart(){ const content=document.getElementById('cartContent'); const cart=getCart(); const products=load(KEY_PRODUCTS); let html=''; let total=0; for(const id in cart){ const p = products.find(x=>x.id===id); const qty = cart[id]; if(!p) continue; const subtotal = p.price*qty; total+=subtotal; const priceStr = p.currency ? formatMoney(p.price,p.currency) : ('$'+p.price); const subStr = p.currency ? formatMoney(subtotal,p.currency) : ('$'+subtotal); html += `<div style="display:flex;justify-content:space-between;padding:8px 0;border-bottom:1px solid rgba(255,255,255,0.02)"><div><strong>${p.title}</strong><div style="color:var(--muted)">${qty} × ${priceStr}</div></div><div style="text-align:right">${subStr}<div style="margin-top:6px"><button class='ghost' onclick="removeFromCart('${id}')">Remove</button></div></div></div>`; }
				if(html==='') html='<div style="color:var(--muted)">Your cart is empty</div>';
				else {
					// attempt to show total in a single currency if possible (use first item's currency), fallback to $ for legacy
					let totalStr = '$'+total.toFixed(2);
					const firstKey = Object.keys(cart)[0];
					if(firstKey){ const p0 = products.find(x=>x.id===firstKey); if(p0 && p0.currency) totalStr = formatMoney(total,p0.currency); }
					html += `<div style="padding-top:8px;text-align:right"><strong>Total: ${totalStr}</strong></div>`;
				}
				content.innerHTML = html;
		}
		function removeFromCart(id){ const cart=getCart(); delete cart[id]; saveCart(cart); renderCart(); }

		function checkout(){ const cart=getCart(); if(Object.keys(cart).length===0) return alert('Cart is empty'); const products=load(KEY_PRODUCTS); let total=0; const items=[]; let currency = null; for(const id in cart){ const p=products.find(x=>x.id===id); if(!p) continue; const qty=cart[id]; if(qty>p.stock) return alert(`Not enough stock for ${p.title}`); items.push({id:p.id,title:p.title,qty,price:p.price,currency:p.currency||'USD'}); total+=p.price*qty; if(!currency) currency = p.currency; p.stock -= qty; }
			// save orders
			const orders = load(KEY_ORDERS); const order = {id:uid('o'),items,total,currency:currency||'USD',date:new Date().toLocaleString()}; orders.unshift(order); save(KEY_ORDERS,orders); save(KEY_PRODUCTS,products); // update persisted products
			// clear cart
			localStorage.removeItem('watchily_cart'); updateCartCount(); renderAll(); renderCart(); alert('Order placed — order id: '+order.id);
		}

		// Seller actions
		async function addProductAsSeller(){
			const title=document.getElementById('s_title').value.trim(); if(!title) return alert('Title required');
			const brand=document.getElementById('s_brand').value.trim();
			const price=Number(document.getElementById('s_price').value)||0;
			const currency = (document.getElementById('s_currency') && document.getElementById('s_currency').value) || 'USD';
			const stock=Number(document.getElementById('s_stock').value)||1;
			const fileInput = document.getElementById('s_image');
			const desc=document.getElementById('s_desc').value.trim();
			let img = '';
			// if a file is selected, read as data URL
			if(fileInput && fileInput.files && fileInput.files[0]){
				const file = fileInput.files[0];
				img = await new Promise((res, rej)=>{
					const reader = new FileReader();
					reader.onload = ()=> res(reader.result);
					reader.onerror = ()=> res('');
					reader.readAsDataURL(file);
				});
			}
			const products=load(KEY_PRODUCTS);
			const p={id:uid('p'),title,brand,price,currency,stock,desc,img,cat:'Seller'};
			products.unshift(p);
			save(KEY_PRODUCTS,products);
			// clear form
			document.getElementById('s_title').value='';
			document.getElementById('s_brand').value='';
			document.getElementById('s_price').value='';
			if(document.getElementById('s_currency')) document.getElementById('s_currency').value='USD';
			document.getElementById('s_stock').value='1';
			if(fileInput) fileInput.value = '';
			document.getElementById('s_desc').value='';
			renderSellerListings(); renderBuyerGrid(); alert('Listing published');
		}

		function editProduct(id){ const p = load(KEY_PRODUCTS).find(x=>x.id===id); if(!p) return alert('Not found'); const newTitle = prompt('Title',p.title); if(newTitle!==null){ p.title=newTitle; save(KEY_PRODUCTS, load(KEY_PRODUCTS).map(x=>x.id===p.id? p : x)); renderAll(); } }

		// Admin actions
		function adminDelete(id){ if(!confirm('Delete listing?')) return; const products = load(KEY_PRODUCTS).filter(x=>x.id!==id); save(KEY_PRODUCTS,products); renderAll(); }

		// Utility - for editing from seller list
		function editProductInline(id){ /* left for extension */ }

		// Initial UI
		navigate('home');

		// Expose some to global for onclick handlers
		window.navigate = navigate; window.addToCart = addToCart; window.openCart = openCart; window.closeCart = closeCart; window.seedDemo = seedDemo; window.clearAll = clearAll; window.viewDetails = viewDetails; window.editProduct = editProduct; window.adminDelete = adminDelete; window.addProductAsSeller = addProductAsSeller; window.doQuickSearch = doQuickSearch; window.removeFromCart = removeFromCart; window.checkout = checkout;
	</script>
</body>
</html>
